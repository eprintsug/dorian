<?xml version="1.0" ?>

<!-- 
	Full "abstract page" (or splash page or summary page, depending on your jargon) for an eprint. 
-->

<cite:citation xmlns="http://www.w3.org/1999/xhtml" xmlns:epc="http://eprints.org/ep3/control" xmlns:cite="http://eprints.org/ep3/citation" >

  <div class="dorian-main">

  <!-- TAB CONTROLS -->
  <div class="dorian-bar ep-bg">
        <epc:if test="$item.has_type('image')">
            <button class="dorian-bar-item dorian-button tablink ep-fg" onclick="openTab(event,'Images')" data-panel="Images">Images</button>
        </epc:if>
        <epc:if test="$item.has_type('video') or $item.url_is_video('official_url')">
            <button class="dorian-bar-item dorian-button tablink" onclick="openTab(event,'Video')" data-panel="Video">Video</button>
        </epc:if>
        <epc:if test="$item.has_type('audio')">
            <button class="dorian-bar-item dorian-button tablink" onclick="openTab(event,'Audio')" data-panel="Audio">Audio</button>
        </epc:if>
        <epc:if test="$item.has_docs() and ($item.has_type('image') or $item.has_type('video') or $item.has_type('audio'))">
            <button class="dorian-bar-item dorian-button tablink" onclick="openTab(event,'Downloads')" data-panel="Downloads">Downloads</button>
        </epc:if>
        <epc:if test="($item.has_docs() and ($item.has_type('image') or $item.has_type('video') or $item.has_type('audio'))) or $item.url_is_video('official_url'))">
            <button id="Metadata-button" class="dorian-bar-item dorian-button tablink" onclick="openTab(event,'Metadata')" data-panel="Metadata">Metadata</button>
        </epc:if>
  </div>

<!-- IMAGES --> 
<epc:if test="$item.has_type('image')">
  <epc:set name='images' expr="$item.get_type('image')">
  <div id="Images" class="dorian-container dorian-border dorian-panel">
    <div id="image_container" class="free-wall picture">
        <epc:foreach expr="$images" iterator="image">
          <div class="item brick">
		  <a href="{$image.url()}" itemprop="contentUrl" data-size="{$image.property('media_width')}x{$image.property('media_height')}">
			<img src="{$image.thumbnail_url('preview')}" itemprop="thumbnail" alt="Image description" data-index="{$index}" />
              </a>
          </div>
        </epc:foreach>
    </div>
  </div>
  </epc:set>
</epc:if>

<!-- VIDEO SECTION -->
<epc:if test="$item.has_type('video') or $item.url_is_video('official_url')">
    <epc:print expr="$item.citation('dorian_video_players_section')"/>
</epc:if>

<!-- AUDIO SECTION -->
<epc:if test="$item.has_type('audio')">
    <epc:print expr="$item.citation('dorian_audio_players_section')"/>
</epc:if>

<!-- DOWNLOADS AKA everything else -->
<epc:if test="$item.has_docs() and ($item.has_type('image') or $item.has_type('video') or $item.has_type('audio'))">
    <epc:print expr="$item.citation('dorian_downloads_section')"/>
</epc:if>

<!-- METADATA SECTION -->

<epc:print expr="$item.citation('dorian_metadata_section')"/>

</div> <!-- end of tabbed stuff -->

<epc:print expr="$item.citation('dorian_photoswipe')"/>
<epc:print expr="$item.citation('dorian_plyr_player')"/>

</cite:citation>

